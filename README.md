# rag_building_documentation

Ai Talent Hub hackaton

## Как поднять проект

1. ``cp .env.example .env``
2. Добавить свой ключ `OPENAI_API_KEY` 	либо в `.env`, либо в системную переменную при запуске/в .zshrc и т.д.
3. Добавить ключ от тг бота `TG_API_TOKEN` в `.env`
4. ``docker compose up``

## Проект состоит из 2 микросервисов:

1. `database` на `http://0.0.0.0/8001` - ретривер для поиска релевантной информации в БД

   1. ``/upload`` принимает на вход файл, обрабатывает и добавляет в бд
   2. ``/upload_folder`` принимает zip архив с файлами, обрабатывает и добавляет в бд
   3. ``/search`` принимает на вход строку запроса и количество записей, которые нужно найти
   4.     ``/docs`` доступ к ручкам
2. `answer_generation` на `http://0.0.0.0/8002` - генерация ответа по найденным чанкам

   1. `/ask` принимает текстовый вопрос `question`, необязательный `num `- количество релевантных чанков из БД и `approach` - подход для генерации ответа
   2. `approach='concat'` - конкатенирует чанки и передает как контекст
   3. `approach-'refine'` - последовательно проходится по чанкам и пытается улучшить существующий ответ с помощью нового контекста этого чанка
3. `tg_bot` - команды можно посмотреть в `tg_bot/main.py`						

Также поднимается `chroma`, доступна по адресу ``http://localhost:8000``
